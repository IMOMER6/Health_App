{"dependencies":[{"name":"@babel/runtime/helpers/objectWithoutPropertiesLoose","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"HFkXuFcBAqfzGtqyPj8g62MKT0M=","exportNames":["*"],"imports":1}},{"name":"./json-schema-processors.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":60,"index":60}}],"key":"3WOd2OgWUBhfvZ0UHfVfCMoW2FQ=","exportNames":["*"],"imports":1}},{"name":"./to-json-schema.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":61},"end":{"line":2,"column":89,"index":150}}],"key":"+jG0B09vt7vkDa65ivf1XmgJgIE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  const _excluded = [\"~standard\"];\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"JSONSchemaGenerator\", {\n    enumerable: true,\n    get: function () {\n      return JSONSchemaGenerator;\n    }\n  });\n  var _babelRuntimeHelpersObjectWithoutPropertiesLoose = require(_dependencyMap[0], \"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n  var _objectWithoutPropertiesLoose = _interopDefault(_babelRuntimeHelpersObjectWithoutPropertiesLoose);\n  var _jsonSchemaProcessorsJs = require(_dependencyMap[1], \"./json-schema-processors.js\");\n  var _toJsonSchemaJs = require(_dependencyMap[2], \"./to-json-schema.js\");\n  /**\n   * Legacy class-based interface for JSON Schema generation.\n   * This class wraps the new functional implementation to provide backward compatibility.\n   *\n   * @deprecated Use the `toJSONSchema` function instead for new code.\n   *\n   * @example\n   * ```typescript\n   * // Legacy usage (still supported)\n   * const gen = new JSONSchemaGenerator({ target: \"draft-07\" });\n   * gen.process(schema);\n   * const result = gen.emit(schema);\n   *\n   * // Preferred modern usage\n   * const result = toJSONSchema(schema, { target: \"draft-07\" });\n   * ```\n   */\n  class JSONSchemaGenerator {\n    /** @deprecated Access via ctx instead */\n    get metadataRegistry() {\n      return this.ctx.metadataRegistry;\n    }\n    /** @deprecated Access via ctx instead */\n    get target() {\n      return this.ctx.target;\n    }\n    /** @deprecated Access via ctx instead */\n    get unrepresentable() {\n      return this.ctx.unrepresentable;\n    }\n    /** @deprecated Access via ctx instead */\n    get override() {\n      return this.ctx.override;\n    }\n    /** @deprecated Access via ctx instead */\n    get io() {\n      return this.ctx.io;\n    }\n    /** @deprecated Access via ctx instead */\n    get counter() {\n      return this.ctx.counter;\n    }\n    set counter(value) {\n      this.ctx.counter = value;\n    }\n    /** @deprecated Access via ctx instead */\n    get seen() {\n      return this.ctx.seen;\n    }\n    constructor(params) {\n      // Normalize target for internal context\n      let normalizedTarget = params?.target ?? \"draft-2020-12\";\n      if (normalizedTarget === \"draft-4\") normalizedTarget = \"draft-04\";\n      if (normalizedTarget === \"draft-7\") normalizedTarget = \"draft-07\";\n      this.ctx = (0, _toJsonSchemaJs.initializeContext)(Object.assign({\n        processors: _jsonSchemaProcessorsJs.allProcessors,\n        target: normalizedTarget\n      }, params?.metadata && {\n        metadata: params.metadata\n      }, params?.unrepresentable && {\n        unrepresentable: params.unrepresentable\n      }, params?.override && {\n        override: params.override\n      }, params?.io && {\n        io: params.io\n      }));\n    }\n    /**\n     * Process a schema to prepare it for JSON Schema generation.\n     * This must be called before emit().\n     */\n    process(schema, _params = {\n      path: [],\n      schemaPath: []\n    }) {\n      return (0, _toJsonSchemaJs.process)(schema, this.ctx, _params);\n    }\n    /**\n     * Emit the final JSON Schema after processing.\n     * Must call process() first.\n     */\n    emit(schema, _params) {\n      // Apply emit params to the context\n      if (_params) {\n        if (_params.cycles) this.ctx.cycles = _params.cycles;\n        if (_params.reused) this.ctx.reused = _params.reused;\n        if (_params.external) this.ctx.external = _params.external;\n      }\n      (0, _toJsonSchemaJs.extractDefs)(this.ctx, schema);\n      const result = (0, _toJsonSchemaJs.finalize)(this.ctx, schema);\n      // Strip ~standard property to match old implementation's return type\n      const plainResult = (0, _objectWithoutPropertiesLoose.default)(result, _excluded);\n      return plainResult;\n    }\n  }\n});","lineCount":118,"map":[[13,2,20,0,"Object"],[13,8,20,0],[13,9,20,0,"defineProperty"],[13,23,20,0],[13,24,20,0,"exports"],[13,31,20,0],[14,4,20,0,"enumerable"],[14,14,20,0],[15,4,20,0,"get"],[15,7,20,0],[15,18,20,0,"get"],[15,19,20,0],[16,6,20,0],[16,13,20,0,"JSONSchemaGenerator"],[16,32,20,0],[17,4,20,0],[18,2,20,0],[19,2,95,1],[19,6,95,1,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[19,54,95,1],[19,57,95,1,"require"],[19,64,95,1],[19,65,95,1,"_dependencyMap"],[19,79,95,1],[20,2,95,1],[20,6,95,1,"_objectWithoutPropertiesLoose"],[20,35,95,1],[20,38,95,1,"_interopDefault"],[20,53,95,1],[20,54,95,1,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[20,102,95,1],[21,2,1,0],[21,6,1,0,"_jsonSchemaProcessorsJs"],[21,29,1,0],[21,32,1,0,"require"],[21,39,1,0],[21,40,1,0,"_dependencyMap"],[21,54,1,0],[22,2,2,0],[22,6,2,0,"_toJsonSchemaJs"],[22,21,2,0],[22,24,2,0,"require"],[22,31,2,0],[22,32,2,0,"_dependencyMap"],[22,46,2,0],[23,2,3,0],[24,0,4,0],[25,0,5,0],[26,0,6,0],[27,0,7,0],[28,0,8,0],[29,0,9,0],[30,0,10,0],[31,0,11,0],[32,0,12,0],[33,0,13,0],[34,0,14,0],[35,0,15,0],[36,0,16,0],[37,0,17,0],[38,0,18,0],[39,0,19,0],[40,2,20,7],[40,8,20,13,"JSONSchemaGenerator"],[40,27,20,32],[40,28,20,33],[41,4,21,4],[42,4,22,4],[42,8,22,8,"metadataRegistry"],[42,24,22,24,"metadataRegistry"],[42,25,22,24],[42,27,22,27],[43,6,23,8],[43,13,23,15],[43,17,23,19],[43,18,23,20,"ctx"],[43,21,23,23],[43,22,23,24,"metadataRegistry"],[43,38,23,40],[44,4,24,4],[45,4,25,4],[46,4,26,4],[46,8,26,8,"target"],[46,14,26,14,"target"],[46,15,26,14],[46,17,26,17],[47,6,27,8],[47,13,27,15],[47,17,27,19],[47,18,27,20,"ctx"],[47,21,27,23],[47,22,27,24,"target"],[47,28,27,30],[48,4,28,4],[49,4,29,4],[50,4,30,4],[50,8,30,8,"unrepresentable"],[50,23,30,23,"unrepresentable"],[50,24,30,23],[50,26,30,26],[51,6,31,8],[51,13,31,15],[51,17,31,19],[51,18,31,20,"ctx"],[51,21,31,23],[51,22,31,24,"unrepresentable"],[51,37,31,39],[52,4,32,4],[53,4,33,4],[54,4,34,4],[54,8,34,8,"override"],[54,16,34,16,"override"],[54,17,34,16],[54,19,34,19],[55,6,35,8],[55,13,35,15],[55,17,35,19],[55,18,35,20,"ctx"],[55,21,35,23],[55,22,35,24,"override"],[55,30,35,32],[56,4,36,4],[57,4,37,4],[58,4,38,4],[58,8,38,8,"io"],[58,10,38,10,"io"],[58,11,38,10],[58,13,38,13],[59,6,39,8],[59,13,39,15],[59,17,39,19],[59,18,39,20,"ctx"],[59,21,39,23],[59,22,39,24,"io"],[59,24,39,26],[60,4,40,4],[61,4,41,4],[62,4,42,4],[62,8,42,8,"counter"],[62,15,42,15,"counter"],[62,16,42,15],[62,18,42,18],[63,6,43,8],[63,13,43,15],[63,17,43,19],[63,18,43,20,"ctx"],[63,21,43,23],[63,22,43,24,"counter"],[63,29,43,31],[64,4,44,4],[65,4,45,4],[65,8,45,8,"counter"],[65,15,45,15,"counter"],[65,16,45,16,"value"],[65,21,45,21],[65,23,45,23],[66,6,46,8],[66,10,46,12],[66,11,46,13,"ctx"],[66,14,46,16],[66,15,46,17,"counter"],[66,22,46,24],[66,25,46,27,"value"],[66,30,46,32],[67,4,47,4],[68,4,48,4],[69,4,49,4],[69,8,49,8,"seen"],[69,12,49,12,"seen"],[69,13,49,12],[69,15,49,15],[70,6,50,8],[70,13,50,15],[70,17,50,19],[70,18,50,20,"ctx"],[70,21,50,23],[70,22,50,24,"seen"],[70,26,50,28],[71,4,51,4],[72,4,52,4,"constructor"],[72,15,52,15,"constructor"],[72,16,52,16,"params"],[72,22,52,22],[72,24,52,24],[73,6,53,8],[74,6,54,8],[74,10,54,12,"normalizedTarget"],[74,26,54,28],[74,29,54,31,"params"],[74,35,54,37],[74,37,54,39,"target"],[74,43,54,45],[74,47,54,49],[74,62,54,64],[75,6,55,8],[75,10,55,12,"normalizedTarget"],[75,26,55,28],[75,31,55,33],[75,40,55,42],[75,42,56,12,"normalizedTarget"],[75,58,56,28],[75,61,56,31],[75,71,56,41],[76,6,57,8],[76,10,57,12,"normalizedTarget"],[76,26,57,28],[76,31,57,33],[76,40,57,42],[76,42,58,12,"normalizedTarget"],[76,58,58,28],[76,61,58,31],[76,71,58,41],[77,6,59,8],[77,10,59,12],[77,11,59,13,"ctx"],[77,14,59,16],[77,17,59,19],[77,21,59,19,"initializeContext"],[77,36,59,36],[77,37,59,36,"initializeContext"],[77,54,59,36],[77,56,59,36,"Object"],[77,62,59,36],[77,63,59,36,"assign"],[77,69,59,36],[78,8,60,12,"processors"],[78,18,60,22],[78,20,60,24,"allProcessors"],[78,43,60,37],[78,44,60,37,"allProcessors"],[78,57,60,37],[79,8,61,12,"target"],[79,14,61,18],[79,16,61,20,"normalizedTarget"],[80,6,61,36],[80,9,62,16,"params"],[80,15,62,22],[80,17,62,24,"metadata"],[80,25,62,32],[80,29,62,36],[81,8,62,38,"metadata"],[81,16,62,46],[81,18,62,48,"params"],[81,24,62,54],[81,25,62,55,"metadata"],[82,6,62,64],[82,7,62,65],[82,9,63,16,"params"],[82,15,63,22],[82,17,63,24,"unrepresentable"],[82,32,63,39],[82,36,63,43],[83,8,63,45,"unrepresentable"],[83,23,63,60],[83,25,63,62,"params"],[83,31,63,68],[83,32,63,69,"unrepresentable"],[84,6,63,85],[84,7,63,86],[84,9,64,16,"params"],[84,15,64,22],[84,17,64,24,"override"],[84,25,64,32],[84,29,64,36],[85,8,64,38,"override"],[85,16,64,46],[85,18,64,48,"params"],[85,24,64,54],[85,25,64,55,"override"],[86,6,64,64],[86,7,64,65],[86,9,65,16,"params"],[86,15,65,22],[86,17,65,24,"io"],[86,19,65,26],[86,23,65,30],[87,8,65,32,"io"],[87,10,65,34],[87,12,65,36,"params"],[87,18,65,42],[87,19,65,43,"io"],[88,6,65,46],[88,7,65,47],[88,8,66,9],[88,9,66,10],[89,4,67,4],[90,4,68,4],[91,0,69,0],[92,0,70,0],[93,0,71,0],[94,4,72,4,"process"],[94,11,72,11,"process"],[94,12,72,12,"schema"],[94,18,72,18],[94,20,72,20,"_params"],[94,27,72,27],[94,30,72,30],[95,6,72,32,"path"],[95,10,72,36],[95,12,72,38],[95,14,72,40],[96,6,72,42,"schemaPath"],[96,16,72,52],[96,18,72,54],[97,4,72,57],[97,5,72,58],[97,7,72,60],[98,6,73,8],[98,13,73,15],[98,17,73,15,"process"],[98,32,73,22],[98,33,73,22,"process"],[98,40,73,22],[98,42,73,23,"schema"],[98,48,73,29],[98,50,73,31],[98,54,73,35],[98,55,73,36,"ctx"],[98,58,73,39],[98,60,73,41,"_params"],[98,67,73,48],[98,68,73,49],[99,4,74,4],[100,4,75,4],[101,0,76,0],[102,0,77,0],[103,0,78,0],[104,4,79,4,"emit"],[104,8,79,8,"emit"],[104,9,79,9,"schema"],[104,15,79,15],[104,17,79,17,"_params"],[104,24,79,24],[104,26,79,26],[105,6,80,8],[106,6,81,8],[106,10,81,12,"_params"],[106,17,81,19],[106,19,81,21],[107,8,82,12],[107,12,82,16,"_params"],[107,19,82,23],[107,20,82,24,"cycles"],[107,26,82,30],[107,28,83,16],[107,32,83,20],[107,33,83,21,"ctx"],[107,36,83,24],[107,37,83,25,"cycles"],[107,43,83,31],[107,46,83,34,"_params"],[107,53,83,41],[107,54,83,42,"cycles"],[107,60,83,48],[108,8,84,12],[108,12,84,16,"_params"],[108,19,84,23],[108,20,84,24,"reused"],[108,26,84,30],[108,28,85,16],[108,32,85,20],[108,33,85,21,"ctx"],[108,36,85,24],[108,37,85,25,"reused"],[108,43,85,31],[108,46,85,34,"_params"],[108,53,85,41],[108,54,85,42,"reused"],[108,60,85,48],[109,8,86,12],[109,12,86,16,"_params"],[109,19,86,23],[109,20,86,24,"external"],[109,28,86,32],[109,30,87,16],[109,34,87,20],[109,35,87,21,"ctx"],[109,38,87,24],[109,39,87,25,"external"],[109,47,87,33],[109,50,87,36,"_params"],[109,57,87,43],[109,58,87,44,"external"],[109,66,87,52],[110,6,88,8],[111,6,89,8],[111,10,89,8,"extractDefs"],[111,25,89,19],[111,26,89,19,"extractDefs"],[111,37,89,19],[111,39,89,20],[111,43,89,24],[111,44,89,25,"ctx"],[111,47,89,28],[111,49,89,30,"schema"],[111,55,89,36],[111,56,89,37],[112,6,90,8],[112,12,90,14,"result"],[112,18,90,20],[112,21,90,23],[112,25,90,23,"finalize"],[112,40,90,31],[112,41,90,31,"finalize"],[112,49,90,31],[112,51,90,32],[112,55,90,36],[112,56,90,37,"ctx"],[112,59,90,40],[112,61,90,42,"schema"],[112,67,90,48],[112,68,90,49],[113,6,91,8],[114,6,92,8],[114,12,92,35,"plainResult"],[114,23,92,46],[114,30,92,46,"_objectWithoutPropertiesLoose"],[114,59,92,46],[114,60,92,46,"default"],[114,67,92,46],[114,69,92,51,"result"],[114,75,92,57],[114,77,92,57,"_excluded"],[114,86,92,57],[115,6,93,8],[115,13,93,15,"plainResult"],[115,24,93,26],[116,4,94,4],[117,2,95,0],[118,0,95,1],[118,3]],"functionMap":{"names":["<global>","JSONSchemaGenerator","JSONSchemaGenerator#get__metadataRegistry","JSONSchemaGenerator#get__target","JSONSchemaGenerator#get__unrepresentable","JSONSchemaGenerator#get__override","JSONSchemaGenerator#get__io","JSONSchemaGenerator#get__counter","JSONSchemaGenerator#set__counter","JSONSchemaGenerator#get__seen","JSONSchemaGenerator#constructor","JSONSchemaGenerator#process","JSONSchemaGenerator#emit"],"mappings":"AAA;OCmB;ICE;KDE;IEE;KFE;IGE;KHE;IIE;KJE;IKE;KLE;IME;KNE;IOC;KPE;IQE;KRE;ISC;KTe;IUK;KVE;IWK;KXe;CDC"},"hasCjsExports":false},"type":"js/module"}]}