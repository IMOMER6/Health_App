{"dependencies":[{"name":"./json-schema-processors.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":60,"index":60}}],"key":"3WOd2OgWUBhfvZ0UHfVfCMoW2FQ=","exportNames":["*"],"imports":1}},{"name":"./to-json-schema.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":61},"end":{"line":2,"column":89,"index":150}}],"key":"+jG0B09vt7vkDa65ivf1XmgJgIE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"JSONSchemaGenerator\", {\n    enumerable: true,\n    get: function () {\n      return JSONSchemaGenerator;\n    }\n  });\n  var _jsonSchemaProcessorsJs = require(_dependencyMap[0], \"./json-schema-processors.js\");\n  var _toJsonSchemaJs = require(_dependencyMap[1], \"./to-json-schema.js\");\n  /**\n   * Legacy class-based interface for JSON Schema generation.\n   * This class wraps the new functional implementation to provide backward compatibility.\n   *\n   * @deprecated Use the `toJSONSchema` function instead for new code.\n   *\n   * @example\n   * ```typescript\n   * // Legacy usage (still supported)\n   * const gen = new JSONSchemaGenerator({ target: \"draft-07\" });\n   * gen.process(schema);\n   * const result = gen.emit(schema);\n   *\n   * // Preferred modern usage\n   * const result = toJSONSchema(schema, { target: \"draft-07\" });\n   * ```\n   */\n  class JSONSchemaGenerator {\n    /** @deprecated Access via ctx instead */\n    get metadataRegistry() {\n      return this.ctx.metadataRegistry;\n    }\n    /** @deprecated Access via ctx instead */\n    get target() {\n      return this.ctx.target;\n    }\n    /** @deprecated Access via ctx instead */\n    get unrepresentable() {\n      return this.ctx.unrepresentable;\n    }\n    /** @deprecated Access via ctx instead */\n    get override() {\n      return this.ctx.override;\n    }\n    /** @deprecated Access via ctx instead */\n    get io() {\n      return this.ctx.io;\n    }\n    /** @deprecated Access via ctx instead */\n    get counter() {\n      return this.ctx.counter;\n    }\n    set counter(value) {\n      this.ctx.counter = value;\n    }\n    /** @deprecated Access via ctx instead */\n    get seen() {\n      return this.ctx.seen;\n    }\n    constructor(params) {\n      // Normalize target for internal context\n      let normalizedTarget = params?.target ?? \"draft-2020-12\";\n      if (normalizedTarget === \"draft-4\") normalizedTarget = \"draft-04\";\n      if (normalizedTarget === \"draft-7\") normalizedTarget = \"draft-07\";\n      this.ctx = (0, _toJsonSchemaJs.initializeContext)({\n        processors: _jsonSchemaProcessorsJs.allProcessors,\n        target: normalizedTarget,\n        ...(params?.metadata && {\n          metadata: params.metadata\n        }),\n        ...(params?.unrepresentable && {\n          unrepresentable: params.unrepresentable\n        }),\n        ...(params?.override && {\n          override: params.override\n        }),\n        ...(params?.io && {\n          io: params.io\n        })\n      });\n    }\n    /**\n     * Process a schema to prepare it for JSON Schema generation.\n     * This must be called before emit().\n     */\n    process(schema, _params = {\n      path: [],\n      schemaPath: []\n    }) {\n      return (0, _toJsonSchemaJs.process)(schema, this.ctx, _params);\n    }\n    /**\n     * Emit the final JSON Schema after processing.\n     * Must call process() first.\n     */\n    emit(schema, _params) {\n      // Apply emit params to the context\n      if (_params) {\n        if (_params.cycles) this.ctx.cycles = _params.cycles;\n        if (_params.reused) this.ctx.reused = _params.reused;\n        if (_params.external) this.ctx.external = _params.external;\n      }\n      (0, _toJsonSchemaJs.extractDefs)(this.ctx, schema);\n      const result = (0, _toJsonSchemaJs.finalize)(this.ctx, schema);\n      // Strip ~standard property to match old implementation's return type\n      const {\n        \"~standard\": _,\n        ...plainResult\n      } = result;\n      return plainResult;\n    }\n  }\n});","lineCount":117,"map":[[7,2,20,0,"Object"],[7,8,20,0],[7,9,20,0,"defineProperty"],[7,23,20,0],[7,24,20,0,"exports"],[7,31,20,0],[8,4,20,0,"enumerable"],[8,14,20,0],[9,4,20,0,"get"],[9,7,20,0],[9,18,20,0,"get"],[9,19,20,0],[10,6,20,0],[10,13,20,0,"JSONSchemaGenerator"],[10,32,20,0],[11,4,20,0],[12,2,20,0],[13,2,1,0],[13,6,1,0,"_jsonSchemaProcessorsJs"],[13,29,1,0],[13,32,1,0,"require"],[13,39,1,0],[13,40,1,0,"_dependencyMap"],[13,54,1,0],[14,2,2,0],[14,6,2,0,"_toJsonSchemaJs"],[14,21,2,0],[14,24,2,0,"require"],[14,31,2,0],[14,32,2,0,"_dependencyMap"],[14,46,2,0],[15,2,3,0],[16,0,4,0],[17,0,5,0],[18,0,6,0],[19,0,7,0],[20,0,8,0],[21,0,9,0],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,2,20,7],[32,8,20,13,"JSONSchemaGenerator"],[32,27,20,32],[32,28,20,33],[33,4,21,4],[34,4,22,4],[34,8,22,8,"metadataRegistry"],[34,24,22,24,"metadataRegistry"],[34,25,22,24],[34,27,22,27],[35,6,23,8],[35,13,23,15],[35,17,23,19],[35,18,23,20,"ctx"],[35,21,23,23],[35,22,23,24,"metadataRegistry"],[35,38,23,40],[36,4,24,4],[37,4,25,4],[38,4,26,4],[38,8,26,8,"target"],[38,14,26,14,"target"],[38,15,26,14],[38,17,26,17],[39,6,27,8],[39,13,27,15],[39,17,27,19],[39,18,27,20,"ctx"],[39,21,27,23],[39,22,27,24,"target"],[39,28,27,30],[40,4,28,4],[41,4,29,4],[42,4,30,4],[42,8,30,8,"unrepresentable"],[42,23,30,23,"unrepresentable"],[42,24,30,23],[42,26,30,26],[43,6,31,8],[43,13,31,15],[43,17,31,19],[43,18,31,20,"ctx"],[43,21,31,23],[43,22,31,24,"unrepresentable"],[43,37,31,39],[44,4,32,4],[45,4,33,4],[46,4,34,4],[46,8,34,8,"override"],[46,16,34,16,"override"],[46,17,34,16],[46,19,34,19],[47,6,35,8],[47,13,35,15],[47,17,35,19],[47,18,35,20,"ctx"],[47,21,35,23],[47,22,35,24,"override"],[47,30,35,32],[48,4,36,4],[49,4,37,4],[50,4,38,4],[50,8,38,8,"io"],[50,10,38,10,"io"],[50,11,38,10],[50,13,38,13],[51,6,39,8],[51,13,39,15],[51,17,39,19],[51,18,39,20,"ctx"],[51,21,39,23],[51,22,39,24,"io"],[51,24,39,26],[52,4,40,4],[53,4,41,4],[54,4,42,4],[54,8,42,8,"counter"],[54,15,42,15,"counter"],[54,16,42,15],[54,18,42,18],[55,6,43,8],[55,13,43,15],[55,17,43,19],[55,18,43,20,"ctx"],[55,21,43,23],[55,22,43,24,"counter"],[55,29,43,31],[56,4,44,4],[57,4,45,4],[57,8,45,8,"counter"],[57,15,45,15,"counter"],[57,16,45,16,"value"],[57,21,45,21],[57,23,45,23],[58,6,46,8],[58,10,46,12],[58,11,46,13,"ctx"],[58,14,46,16],[58,15,46,17,"counter"],[58,22,46,24],[58,25,46,27,"value"],[58,30,46,32],[59,4,47,4],[60,4,48,4],[61,4,49,4],[61,8,49,8,"seen"],[61,12,49,12,"seen"],[61,13,49,12],[61,15,49,15],[62,6,50,8],[62,13,50,15],[62,17,50,19],[62,18,50,20,"ctx"],[62,21,50,23],[62,22,50,24,"seen"],[62,26,50,28],[63,4,51,4],[64,4,52,4,"constructor"],[64,15,52,15,"constructor"],[64,16,52,16,"params"],[64,22,52,22],[64,24,52,24],[65,6,53,8],[66,6,54,8],[66,10,54,12,"normalizedTarget"],[66,26,54,28],[66,29,54,31,"params"],[66,35,54,37],[66,37,54,39,"target"],[66,43,54,45],[66,47,54,49],[66,62,54,64],[67,6,55,8],[67,10,55,12,"normalizedTarget"],[67,26,55,28],[67,31,55,33],[67,40,55,42],[67,42,56,12,"normalizedTarget"],[67,58,56,28],[67,61,56,31],[67,71,56,41],[68,6,57,8],[68,10,57,12,"normalizedTarget"],[68,26,57,28],[68,31,57,33],[68,40,57,42],[68,42,58,12,"normalizedTarget"],[68,58,58,28],[68,61,58,31],[68,71,58,41],[69,6,59,8],[69,10,59,12],[69,11,59,13,"ctx"],[69,14,59,16],[69,17,59,19],[69,21,59,19,"initializeContext"],[69,36,59,36],[69,37,59,36,"initializeContext"],[69,54,59,36],[69,56,59,37],[70,8,60,12,"processors"],[70,18,60,22],[70,20,60,24,"allProcessors"],[70,43,60,37],[70,44,60,37,"allProcessors"],[70,57,60,37],[71,8,61,12,"target"],[71,14,61,18],[71,16,61,20,"normalizedTarget"],[71,32,61,36],[72,8,62,12],[72,12,62,16,"params"],[72,18,62,22],[72,20,62,24,"metadata"],[72,28,62,32],[72,32,62,36],[73,10,62,38,"metadata"],[73,18,62,46],[73,20,62,48,"params"],[73,26,62,54],[73,27,62,55,"metadata"],[74,8,62,64],[74,9,62,65],[74,10,62,66],[75,8,63,12],[75,12,63,16,"params"],[75,18,63,22],[75,20,63,24,"unrepresentable"],[75,35,63,39],[75,39,63,43],[76,10,63,45,"unrepresentable"],[76,25,63,60],[76,27,63,62,"params"],[76,33,63,68],[76,34,63,69,"unrepresentable"],[77,8,63,85],[77,9,63,86],[77,10,63,87],[78,8,64,12],[78,12,64,16,"params"],[78,18,64,22],[78,20,64,24,"override"],[78,28,64,32],[78,32,64,36],[79,10,64,38,"override"],[79,18,64,46],[79,20,64,48,"params"],[79,26,64,54],[79,27,64,55,"override"],[80,8,64,64],[80,9,64,65],[80,10,64,66],[81,8,65,12],[81,12,65,16,"params"],[81,18,65,22],[81,20,65,24,"io"],[81,22,65,26],[81,26,65,30],[82,10,65,32,"io"],[82,12,65,34],[82,14,65,36,"params"],[82,20,65,42],[82,21,65,43,"io"],[83,8,65,46],[83,9,65,47],[84,6,66,8],[84,7,66,9],[84,8,66,10],[85,4,67,4],[86,4,68,4],[87,0,69,0],[88,0,70,0],[89,0,71,0],[90,4,72,4,"process"],[90,11,72,11,"process"],[90,12,72,12,"schema"],[90,18,72,18],[90,20,72,20,"_params"],[90,27,72,27],[90,30,72,30],[91,6,72,32,"path"],[91,10,72,36],[91,12,72,38],[91,14,72,40],[92,6,72,42,"schemaPath"],[92,16,72,52],[92,18,72,54],[93,4,72,57],[93,5,72,58],[93,7,72,60],[94,6,73,8],[94,13,73,15],[94,17,73,15,"process"],[94,32,73,22],[94,33,73,22,"process"],[94,40,73,22],[94,42,73,23,"schema"],[94,48,73,29],[94,50,73,31],[94,54,73,35],[94,55,73,36,"ctx"],[94,58,73,39],[94,60,73,41,"_params"],[94,67,73,48],[94,68,73,49],[95,4,74,4],[96,4,75,4],[97,0,76,0],[98,0,77,0],[99,0,78,0],[100,4,79,4,"emit"],[100,8,79,8,"emit"],[100,9,79,9,"schema"],[100,15,79,15],[100,17,79,17,"_params"],[100,24,79,24],[100,26,79,26],[101,6,80,8],[102,6,81,8],[102,10,81,12,"_params"],[102,17,81,19],[102,19,81,21],[103,8,82,12],[103,12,82,16,"_params"],[103,19,82,23],[103,20,82,24,"cycles"],[103,26,82,30],[103,28,83,16],[103,32,83,20],[103,33,83,21,"ctx"],[103,36,83,24],[103,37,83,25,"cycles"],[103,43,83,31],[103,46,83,34,"_params"],[103,53,83,41],[103,54,83,42,"cycles"],[103,60,83,48],[104,8,84,12],[104,12,84,16,"_params"],[104,19,84,23],[104,20,84,24,"reused"],[104,26,84,30],[104,28,85,16],[104,32,85,20],[104,33,85,21,"ctx"],[104,36,85,24],[104,37,85,25,"reused"],[104,43,85,31],[104,46,85,34,"_params"],[104,53,85,41],[104,54,85,42,"reused"],[104,60,85,48],[105,8,86,12],[105,12,86,16,"_params"],[105,19,86,23],[105,20,86,24,"external"],[105,28,86,32],[105,30,87,16],[105,34,87,20],[105,35,87,21,"ctx"],[105,38,87,24],[105,39,87,25,"external"],[105,47,87,33],[105,50,87,36,"_params"],[105,57,87,43],[105,58,87,44,"external"],[105,66,87,52],[106,6,88,8],[107,6,89,8],[107,10,89,8,"extractDefs"],[107,25,89,19],[107,26,89,19,"extractDefs"],[107,37,89,19],[107,39,89,20],[107,43,89,24],[107,44,89,25,"ctx"],[107,47,89,28],[107,49,89,30,"schema"],[107,55,89,36],[107,56,89,37],[108,6,90,8],[108,12,90,14,"result"],[108,18,90,20],[108,21,90,23],[108,25,90,23,"finalize"],[108,40,90,31],[108,41,90,31,"finalize"],[108,49,90,31],[108,51,90,32],[108,55,90,36],[108,56,90,37,"ctx"],[108,59,90,40],[108,61,90,42,"schema"],[108,67,90,48],[108,68,90,49],[109,6,91,8],[110,6,92,8],[110,12,92,14],[111,8,92,16],[111,19,92,27],[111,21,92,29,"_"],[111,22,92,30],[112,8,92,32],[112,11,92,35,"plainResult"],[113,6,92,47],[113,7,92,48],[113,10,92,51,"result"],[113,16,92,57],[114,6,93,8],[114,13,93,15,"plainResult"],[114,24,93,26],[115,4,94,4],[116,2,95,0],[117,0,95,1],[117,3]],"functionMap":{"names":["<global>","JSONSchemaGenerator","JSONSchemaGenerator#get__metadataRegistry","JSONSchemaGenerator#get__target","JSONSchemaGenerator#get__unrepresentable","JSONSchemaGenerator#get__override","JSONSchemaGenerator#get__io","JSONSchemaGenerator#get__counter","JSONSchemaGenerator#set__counter","JSONSchemaGenerator#get__seen","JSONSchemaGenerator#constructor","JSONSchemaGenerator#process","JSONSchemaGenerator#emit"],"mappings":"AAA;OCmB;ICE;KDE;IEE;KFE;IGE;KHE;IIE;KJE;IKE;KLE;IME;KNE;IOC;KPE;IQE;KRE;ISC;KTe;IUK;KVE;IWK;KXe;CDC"},"hasCjsExports":false},"type":"js/module"}]}